.program risingEdge_ccd
; Wait for rising edge on pin and send interrupt when it happens

.wrap_target
	wait 0 pin 0	; Wait for rising edge on pin 0
	wait 1 pin 0
	irq wait 0	; Send IRQ 0 and block
.wrap


% c-sdk {
	static inline void risingEdgeInit_ccd(PIO pio, uint sm, uint offset, uint clock_pin){
		pio_sm_config c = risingEdge_ccd_program_get_default_config(offset);
		sm_config_set_in_pins(&c, clock_pin);					//Set base IN pin
		pio_sm_set_consecutive_pindirs(pio, sm, clock_pin, 1, false);		//Set direction of 1 pin to IN
		pio_gpio_init(pio, clock_pin);						//Connect GPIO to PIO block
		pio_sm_init(pio, sm, offset, &c);					//Load config and jump to start of program
		pio_sm_set_enabled(pio, sm, true);					//Start PIO block
	}

%}
